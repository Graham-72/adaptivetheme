/**
 * Forms.
 * - NOTES:
 *   - input type submit is treated as a 'button', see _buttons.scss
 *   - for drop buttons see _buttons.scss
 */

$form-item-text-align:              center;

$form-item-text-color:              lighten($text-color, 20%); // If text is #000, lighten 20% is #333
$form-item-text-focus-color:        $text-color;

$form-item-help-color:              lighten($text-color, 45%);

$form-item-background-color:        #fff;
$form-item-background-focus-color:  lighten($text-background-color, 5%);

$form-item-borders:                 true;
$form-item-border-width:            $border-width;
$form-item-border-style:            $border-style;
$form-item-border-color:            $border-color;
$form-item-border-radius:           $border-radius; // px value

$form-item-highlights:              true; // false will remove text and box shadows, i.e. a more flat UI


form {
  //@include output-rhythm(margin, $medium 0);

  .field-edit-link {
    margin: 0 0.3em;
  }

  .field-multiple-table {
    margin: 0;

    .field-multiple-drag {
      width: 30px;
      padding-right: 0; // LTR

      .tabledrag-handle {
        padding-right: .5em; // LTR
      }
    }
  }

  .field-add-more-submit {
    margin: .5em 0 0;
  }
}

[dir="rtl"] form .field-multiple-table .field-multiple-drag {
  padding-left: 0;
}

[dir="rtl"] form .field-multiple-table .field-multiple-drag .tabledrag-handle {
  padding-left: .5em;
}

.form-item {
  @include output-rhythm(margin, $small 0 $small);
}

.form-actions {
  @include output-rhythm(margin, $medium 0);
}

input {
  max-width: 100%;
}

input,
select,
button,
textarea {
  @include adjust-font-size-to($medium);
}

input:not([type]),
input[type="text"],
input[type="password"],
input[type="email"],
input[type="url"],
input[type="date"],
input[type="month"],
input[type="time"],
input[type="datetime"],
input[type="datetime-local"],
input[type="week"],
input[type="number"],
input[type="search"],
input[type="tel"],
input[type="color"],
select,
textarea {
  border: $form-item-border-width $form-item-border-style $form-item-border-color;
  background-color: $form-item-background-color;
  color: $form-item-text-color;

  @include output-rhythm(padding, $x-small $small);
  @include border-radius($form-item-border-radius);
  @include transition(all, .15s, linear);

  // Add fancy form highlights
  @if ($form-item-highlights == true) {
    @include box-shadow(rgba(0,0,0,0.1) 0 1px 2px inset);
  }

  &:focus {
    outline: 0;
    outline: thin dotted \9; // IE6-9
    border-color: $form-item-border-color;
    color: $form-item-text-focus-color;
  }

  &[disabled] {
    cursor: not-allowed;
    opacity: 0.7;

    &:hover,
    &:focus {
      color: $form-item-text-focus-color;
    }
  }
}

input[type="checkbox"],
input[type="radio"] {
  display: inline-block;
  position: relative;
  bottom: 1px;
}

input[type="file"]:focus,
input[type="radio"]:focus,
input[type="checkbox"]:focus {
}

input[readonly],
select[readonly],
textarea[readonly] {
}

input:focus:invalid,
textarea:focus:invalid,
select:focus:invalid {
}

input:focus:invalid:focus,
textarea:focus:invalid:focus,
select:focus:invalid:focus {
}

input[type="file"]:focus:invalid:focus,
input[type="radio"]:focus:invalid:focus,
input[type="checkbox"]:focus:invalid:focus {
}

select {
  &[multiple] {
    height: auto;
  }
}

label {
  font-weight: $font-weight-semibold;
  text-decoration: none;
  white-space: nowrap;
  display: block;

  // radio, checkbox options
  &.option {
    font-weight: normal;
    display: inline;
    padding: 0 3px;
  }
}

fieldset,
fieldset.form-item {
  border: 0;
  margin: 0;
  padding: 0;
}

legend {
}

textarea {
  resize: vertical; // Allow only vertical resizing of textareas.
}

.tips {
  font-size: 0.85em;
  color: $form-item-help-color;

  li {
    list-style: none;
  }
}

.description {
  color: $form-item-help-color;
  font-size: 0.85em;
}

tr.odd,
tr.even {
  .form-item {
    margin-top: 0;
    margin-bottom: 0;
    white-space: nowrap;
  }
}

.form-composite > legend,
h4.label {
  font-size: inherit;
  font-weight: $font-weight-semibold;
  margin: 0;
  padding: 0;
}

.form-type-radio,
.form-type-checkbox {
  .description {
    margin-left: 2.4em;
  }
}

.marker,
.form-required {
  color: #e00; // very bright red
}

abbr {
  &.form-required,
  &.tabledrag-changed,
  &.ajax-changed {
    border-bottom: none;
  }
}

.form-item input.error,
.form-item textarea.error,
.form-item select.error {
  border: 2px solid red;
}

.form-type-radios {
  .container-inline {
    label:after {
      content: none;
    }

    .form-type-radio {
      @include output-rhythm(margin, 0 $medium);
    }
  }
}

.container-inline {
  label:after {
    content: ':';
  }

  .form-actions,
  &.form-actions {
    margin-top: 0;
    margin-bottom: 0;
  }
}

/*
 * Autocomplete.
 *
 * @see autocomplete.js
 */

/* Suggestion list */
.ui-autocomplete li.ui-menu-item a.ui-state-focus,
.autocomplete li.ui-menu-item a.ui-state-hover {
  background: #0072b9;
  color: #fff;
  margin: 0;
}

/**
 * Collapsible details.
 *
 * @see collapse.js
 * @thanks http://nicolasgallagher.com/css-background-image-hacks/
 */
details {
  border: $form-item-border-width $form-item-border-style $form-item-border-color;
  @include output-rhythm(margin, $medium 0);
}

details > .details-wrapper {
  @include output-rhythm(margin, $medium);
}

/* @todo Regression: The summary of uncollapsible details are no longer
     vertically aligned with the .details-wrapper in browsers without native
     details support. */
summary {
  cursor: pointer;
  @include output-rhythm(padding, $x-small);
}

.collapse-processed > summary {
  @include output-rhythm(padding, $x-small);
}

.collapse-processed > summary:before {
  font-family: FontAwesome, sans-serif;
  content: "\f0d7"; // fa-caret-down
  float: left;
  @include output-rhythm(height, $medium);
  @include output-rhythm(width, $medium);
  margin: -1px 0 0;
  speak: none; // not well supported but we have it in case it is and the font is not using the PUA.
}

[dir="rtl"] .collapse-processed > summary:before {
  float: right;
}

.collapse-processed:not([open]) > summary:before {
  content: "\f0da"; // LTR, fa-caret-right
}

[dir="rtl"] .collapse-processed:not([open]) > summary:before {
  content: "\f0d9"; // RTL, fa-caret-left
}

